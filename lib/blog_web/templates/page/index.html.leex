<div class="container" phx-hook="IndexPage">
  <section class="section">
    <div class="columns is-desktop">
      <div class="column is-8-desktop">
        <div class="card">
          <header class="card-header">
            <p class="card-header-title">文章</p>
          </header>
          <div class="card-content">
            <%= for article <- @articles do %>
              <div class="columns is-mobile is-vcentered bl-index-articles-item">
                <div class="column bl-index-articles-item-title" phx-hook="ArticleItem">
                  <%= live_link article.title,
                        to: Routes.live_path(@socket, BlogWeb.ArticleLive, article.query_title) %>
                </div>
                <div class="column is-narrow has-text-centered bl-index-articles-item-rm">
                  <span>
                    <%= article.rsum %>
                  </span>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
      <div class="column is-4-desktop bl-sidecards">
        <div class="card">
          <header class="card-header">
            <p class="card-header-title">分类</p>
          </header>
          <div class="card-content bl-index-categories">
            <%= for category <- @categories do %>
              <%= live_link  class: "bl-index-categories-item#{if @category_id == category.id, do: " is-active"}",
                    to: Routes.live_path(@socket, BlogWeb.IndexLive, category.id) do %>
                    <span>
                      <i class="iconfont icon-category"></i>
                    </span>
                    <span><%= category.name %></span>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="card">
          <header class="card-header">
            <p class="card-header-title">标签</p>
          </header>
          <div class="card-content bl-index-tags">
            <%= for tag <- @tags do %>
              <%= if @tag_id == tag.id do %>
                <span class="tag is-primary">
                  <%= tag.name %>
                  <%= live_link "", 
                        class: "delete is-small",
                        to: Routes.live_path(@socket, BlogWeb.IndexLive) %>
                </span>
              <% else %>
                <%= live_link tag.name, 
                      class: "tag is-primary is-small",
                      to: Routes.live_path(@socket, BlogWeb.IndexLive, %{tag_id: tag.id}) %>
              <% end %>
            <% end %>
          </div>
        </div>
        <%# 载入侧边页脚 %>
        <%= Phoenix.LiveView.live_render @socket, BlogWeb.SidefooterLive, id: "home_sidefooter" %>
      </div>
    </div>
  </section>
</div>
